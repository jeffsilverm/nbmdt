<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
    
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

    
<title>NBMDT, the Network Boot Monitor and Diagnostic Tool</title>

</head>
<body>
<h1><a name="mozTocId308862" class="mozTocH1"></a>The Network Boot Monitor Diagnostic Tool (NBMDT)</h1>

<h2><a name="mozTocId235879" class="mozTocH2"></a>Purpose</h2>

<p>The network boot monitor diagnostic tool (NBMDT) is a python
    program that specifically checks for network problems.&nbsp; In a
    future version, it might be more generalized.&nbsp; It has several
    main purposes:<br>
</p>

<ol>

    <li>A system startup time, it runs as a startup script and
        verifies that all of the network, from the ethernet to the
        servers, are working properly</li>
      <li>Once the system is running, it monitors everything
        periodically and gives a visual indication that something is
        wrong</li>
      <li>A system administrator or a network administrator can run it
        at any time to test that the network is working properly</li>
      <li>A system administrator can run it to capture the current state
        of the system, which is "nominal"<br>
      </li>
    </ol>
    <h3><a name="mozTocId341106" class="mozTocH3"></a>What are the advantages of the NBMDT over other network
      monitors?</h3>
    <p>The NBMDT is designed to run in a terminal window, not on a web
      server.&nbsp; Thus, it can pack more information into less screen
      real estate.&nbsp; Updates are more efficient, because things that
      do not need rapid monitoring don't get updated that frequently,
      while things that need close attention can be updated with little
      bandwidth.</p>
    <p>NBMDT is specifically designed to run under linux.&nbsp; Although
      it might be possible to port it to other operating systems, it
      would be difficult to do so.&nbsp; The reason why is that NBMDT
      gets a lot of its information from the /proc and /sys pseudo file
      systems.&nbsp; So it doesn't have to fork a bunch of child
      processes (although it can, if you want to, for example, re-used a
      nagios monitor).<br>
    </p>
    <p>To a large extent, NBMDT is auto configuring.&nbsp; When NBMDT is
      run for the first time, or after a deliberate configuration
      change, the NBMDT can be run with the <tt>--nominal</tt> switch,
      which causes it to explore the network and create a known
      configuration file.&nbsp; This configuration file contains:<br>
    </p>
    <ul>
      <li>The state of Network Interface Cards (NICs) (up or down),</li>
      <li>the MAC address</li>
      <li>the ARP cache</li>
        <li>IPv6 neighbors</li>
      <li>routing table</li>
      <li>IPv4 address</li>
      <li>IPv6 address</li>
      <li>listening UDP, TCP, and SCTP ports.</li>
    </ul>
    <h3><a name="mozTocId319879" class="mozTocH3"></a><br>
    </h3>
    <p><br>
    </p>
    <h2><a name="mozTocId305441" class="mozTocH2"></a>Display</h2><br>
<h3><a name="mozTocId378908" class="mozTocH3"></a>Meaning of the displays:</h3>
<p>The state of an item being monitored or reported on can be easily
      indicated by the back ground color:</p>
<p><meta http-equiv="content-type" content="text/html; charset=UTF-8"></p>
<span style="color:#808080;font-style:italic;"></span>
<dl>
<dd> <span style="background-color:green;">Normal</span></dd><dt>All is well.&nbsp; The interface is working properly in all respects<br>
  <br>
</dt><dd> <span style="background-color:yellow;">Degraded or slow</span></dd><dt>The monitor is measuring traffic flow through the interface or the
  delay required to reach the interface, and it is outside acceptable
  limits.&nbsp; The interface is still working.</dt>
</dl>

<dd><span style="background-color:cyan;">The interface is
      at increased risk of failure because a dependency is down.<span></span></span></dd>


<dt>However, the dependency has some redundancy so the fact that there
      is an upstream failure does not mean that this interface is down.
      For example, there are multiple DNS servers. If a server fails,
      the resolver will pick a different name server. So DNS will be
      working, but there will be fewer servers than normal and a greater
      risk of subsequent failure.<br>
    <br>
</dt><dd><span style="background-color:red">Down cause unknown</span></dd><dt>The resource is flunking its test, cause unknown
<br>
<br>
</dt><dd><span style="background-color:magenta"> Failed due to an upstream dependency.</span></dd><dt>The resource is flunking a health check for some known reason. For
  example, if an applicationm depends on a database, and the database
  fails, then the application will fail. In this case, the database will
  be marked as "failed cause unknown" and the application will be marked
  as "failed due to an upstream dependency"<br>
</dt>

<dl>
<dd><span style="color:white;background-color:Blue ;">The configuration file is wrong</span></dd><dt>The NBMDT is looking for a resource that is in the .ini file, but
    can't be found in the system. Or there is a resourece that is <b>not</b>
    in the configuration file, but the NBMDT found it. The MAC address
    of the interface is wrong. This means that the .ini file is wrong,
    perhaps because it is running on the wrong system or perhaps the
    configuration changed<br>

    <br>

  </dt><dd><span style="background-color:gray; color:black;">A label</span></dd>
</dl>

<dd><br>
</dd><dt>A label or some annotation</dt>
<br>
<h2><a name="mozTocId569121" class="mozTocH2"></a>Operational modes
    </h2>
<p>The NBMDT has 4 operational modes: nominal, startup, and
      monitoring.<br>
    </p>
    <dl>
      <dt>Nominal</dt>
      <dd>In nominal mode, NBMDT assumes that everything is as it should
        be.&nbsp; Guided by the permanent configuration file, it 
explores
        the NICs and the network that the NICs are connected to and then
        builds a running configuration file in .ini file. Then, as 
necessary,
        it will read the contents of that file into its memory and use
        that as the basis for monitoring.&nbsp; The system administrator
 can compare that configuration file against the original to figure out 
what changed.<br>
</dd>
      <dt>Boot</dt>
      <dd>In Boot mode, NBMDT reads the permanent and running
        configuration files, and then displays each item in the list, in
        order.&nbsp; The use case is that the NBMDT is invoked in a startup script, where there is no cursor addressing.</dd>
      <dt>Monitor</dt>
      <dd>In monitor mode, NBMDT reads the permanent and running
        configuration files, and then displays each item in a compact
        display using VT-100 cursor addressing to change the display.&nbsp; In this mode, the operator has the ability to
        mark certain things as known to be down.&nbsp; If something is
        known to be down, then the monitor will not generate any further
        alerts.&nbsp; In monitor mode, each test has a frequency
        associated with it, so that critical items can be detected
        rapidly, and less critical items happen less frequently.&nbsp;
        For example, testing that name resolution works is critical and
        should be tested frequently.&nbsp; Testing that a particular
        name server is working is less critical, because name servers
        are redundant.<br>
      </dd>
      <dt>Test</dt>
      <dd>In test mode, NBMDT does all of the testing that monitor mode
        does, but there is no frequency associated with any test.&nbsp;
        The end result is GO/NOGO. There is no attempt made to diagnose why there is a problem.<br>
</dd>
      <dt>Diagnostic</dt>
      <dd>In diagnostic mode, NBMDT attempts to figure out why something
        is not working.&nbsp; So, for example, look at:
        <ul>
          <li>arp cache to see if the MAC address of the other machine
            is known.</li>
          <li>counters in the physical links to see if they are
            incrementing.</li>
          <li>flags on a physical server to see if there is an
            indication of a problem.</li>
          <li>routes - is the default gateway or default router
            pingable?</li>
          <li>Diagnosing the neighbor discovery protocol</li>
        </ul>
        A future extension of NBMDT is going to be a dependency
        description language which allow the operator to pinpoint what
        has failed by considering all of the things that depend on it.<br>
      </dd>
    </dl>
    <p><br>
    </p>
    <dl>
    </dl>
    <h2><a name="mozTocId336500" class="mozTocH2"></a>Configuration files</h2>
    <h3><a name="mozTocId84646" class="mozTocH3"></a>Permanent configuration file</h3>
    <p>The permanent configuration file is generated by the system
      administrator using any ASCII/Unicode text editor.&nbsp; It is in
      JSON format.&nbsp; The file is organized as a list.&nbsp; Each
      element in the list is a description of something that should be
      monitored.&nbsp; The description includes:<br>
    </p>
    <ul>
      <li>Name</li>
      <li>If not a network device, then how to monitor it.&nbsp; This is
        either a python subroutine or a program (such a monitoring
        program for Nagios)</li>
      <li>The row and column where the device status should be displayed
        in monitor mode</li>
      <li>What it depends on.&nbsp; This is a boolean expression, with
        the names of all of the things that device depends on.</li>
    </ul>
    <p>So, for example, both IPv4 and IPv6 depend on the device being
      UP.&nbsp; If the device is DOWN, then it is assumed that IPv4 and
      IPv6 went down with it.&nbsp; Furthermore, all of the remote DNS
      name servers went down.&nbsp; NTP became degraded.&nbsp; The
      applications that are listening are still listening.&nbsp; NBMDT
      generates only one alert, because it understands the dependencies.</p>
<p>The permanent configuration file also records some system specific things, such as where the ip command is.</p>
<h3><a name="mozTocId304901" class="mozTocH3"></a> <br>



    </h3>
<h3><a name="mozTocId867742" class="mozTocH3"></a>Nominal configuration file</h3>
<p>The nominal configuration file is generated by the nbmdt program at the command of the system administrator.&nbsp;  It is in
      JSON format.&nbsp; When nbmdt is run in nominal mode, it builds a
description of the system and then creates the nominal configuration
file.&nbsp; This file is assumed to be correct.&nbsp; It has to be
changed only when the system changes.</p>
<p><br>
    </p>
    <h2><a name="mozTocId821733" class="mozTocH2"></a>Internals</h2>
    <p>See also <a href="file:///home/jeffs/logbooks/notes_2017-03.html#mozTocId725313">how



        to find everything you want to know about interfaces</a><br>
    </p>
<h3><a name="mozTocId76477" class="mozTocH3"></a>Network cards</h3><pre>jeffs@jeffs-desktop:/home/jeffs/python/nbmdt  (development) *  $ <acronym>ls -l /sys/class/net</acronym><br><samp>total 0</samp><samp><br></samp><samp>lrwxrwxrwx 1 root root 0 Nov 29 04:00 eno1 -&gt; ../../devices/pci0000:00/0000:00:19.0/net/eno1</samp><samp><br></samp><samp>lrwxrwxrwx 1 root root 0 Nov 29 04:00 enp3s0 -&gt; ../../devices/pci0000:00/0000:00:1c.2/0000:03:00.0/net/enp3s0</samp><samp></samp><samp><samp>lrwxrwxrwx 1 root root 0 Nov 29 04:00 lo -&gt; ../../devices/virtual/net/lo</samp><samp><br></samp><samp>lrwxrwxrwx 1 root root 0 Nov 29 04:01 lxcbr0 -&gt; ../../devices/virtual/net/lxcbr0</samp><samp><br></samp><samp>lrwxrwxrwx 1 root root 0 Nov 29 04:01 virbr0 -&gt; ../../devices/virtual/net/virbr0</samp><samp><br></samp><samp>lrwxrwxrwx 1 root root 0 Nov 29 04:01 virbr0-nic -&gt; ../../devices/virtual/net/virbr0-nic</samp><br>jeffs@jeffs-desktop:/home/jeffs/python/nbmdt  (development) *  $ <br>
</samp></pre><h4>Ethernet</h4><p>For more information, refer to <a href="https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net">kernel.org</a>.<br></p><pre>jeffs@jeffs-desktop:/home/jeffs/python/nbmdt  (development) *  $ ls -l /sys/class/net/eno1/*<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/addr_assign_type<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/address<br>-r--r--r-- 1 root root 4096 Nov 29 04:01 /sys/class/net/eno1/addr_len<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/broadcast<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/carrier<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/carrier_changes<br>lrwxrwxrwx 1 root root    0 Nov 29 04:00 /sys/class/net/eno1/device -&gt; ../../../0000:00:19.0<br>-r--r--r-- 1 root root 4096 Nov 29 04:01 /sys/class/net/eno1/dev_id<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/dev_port<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/dormant<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/duplex<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/flags<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/gro_flush_timeout<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/ifalias<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/ifindex<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/iflink<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/link_mode<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/mtu<br>-r--r--r-- 1 root root 4096 Nov 29 04:01 /sys/class/net/eno1/name_assign_type<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/netdev_group<br>-r--r--r-- 1 root root 4096 Nov 29 04:01 /sys/class/net/eno1/operstate<br>-r--r--r-- 1 root root 4096 Nov 29 04:01 /sys/class/net/eno1/phys_port_id<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/phys_port_name<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/phys_switch_id<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/proto_down<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/speed<br>lrwxrwxrwx 1 root root    0 Nov 29 04:00 /sys/class/net/eno1/subsystem -&gt; ../../../../../class/net<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 /sys/class/net/eno1/tx_queue_len<br>-r--r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/type<br>-rw-r--r-- 1 root root 4096 Nov 29 04:00 /sys/class/net/eno1/uevent<br><br>/sys/class/net/eno1/power:<br>total 0<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 async<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 autosuspend_delay_ms<br>-rw-r--r-- 1 root root 4096 Nov 29 06:23 control<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 runtime_active_kids<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 runtime_active_time<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 runtime_enabled<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 runtime_status<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 runtime_suspended_time<br>-r--r--r-- 1 root root 4096 Nov 29 06    @property<br>    def x(self):<br>        return self.__x<br><br>:23 runtime_usage<br><br>/sys/class/net/eno1/queues:<br>total 0<br>drwxr-xr-x 2 root root 0 Nov 29 06:23 rx-0<br>drwxr-xr-x 3 root root 0 Nov 29 06:23 tx-0<br><br>/sys/class/net/eno1/statistics:<br>total 0<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 collisions<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 multicast<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_bytes<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_compressed<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_crc_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_dropped<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_fifo_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_frame_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_length_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_missed_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_nohandler<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_over_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 rx_packets<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_aborted_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_bytes<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_carrier_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_compressed<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_dropped<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_fifo_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_heartbeat_errors<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_packets<br>-r--r--r-- 1 root root 4096 Nov 29 06:23 tx_window_errors<br>jeffs@jeffs-desktop:/home/jeffs/python/nbmdt  (development) *  $<br></pre><h4>WiFi cards</h4><p>In addition to everything above:</p><pre>jeffs@jeffs-laptop:~ $ ls -l /sys/class/net/wlp12s0/phy80211/<br><samp>total 0</samp><samp><br></samp><samp>-r--r--r--. 1 root root 4096 Nov 29 07:55 addresses</samp><samp><br></samp><samp>-r--r--r--. 1 root root 4096 Nov 29 07:55 address_mask</samp><samp><br></samp><samp>lrwxrwxrwx. 1 root root    0 Nov 29 07:55 device -&gt; ../../../0000:0c:00.0</samp><samp><br></samp><samp>-r--r--r--. 1 root root 4096 Nov 29 07:55 index</samp><samp><br></samp><samp>-r--r--r--. 1 root root 4096 Nov 29 07:55 macaddress</samp><samp><br></samp><samp>-r--r--r--. 1 root root 4096 Nov 29 07:55 name</samp><samp><br></samp><samp>drwxr-xr-x. 2 root root    0 Nov 29 07:55 power</samp><samp><br></samp><samp>drwxr-xr-x. 3 root root    0 Nov 29 07:51 rfkill0</samp><samp><br></samp><samp>lrwxrwxrwx. 1 root root    0 Nov 29 07:51 subsystem -&gt; ../../../../../../class/ieee80211</samp><samp><br></samp><samp>-rw-r--r--. 1 root root 4096 Nov 29 07:51 uevent</samp><br>jeffs@jeffs-laptop:~ $ <br><br></pre><h5>WiFi and various iw commands</h5><pre>[root@jeffs-laptop ~]# iwlist wlp12s0 scanning | egrep "Cell|ESSID"<br>          Cell 01 - Address: 04:BF:6D:D9:8A:B5<br>                    ESSID:"ZoopCentury"<br>          Cell 02 - Address: 5C:6A:80:1D:0A:1C<br>                    ESSID:"CenturyLink3629"<br>[root@jeffs-laptop ~]#<br></pre><p><br></p><p><br></p><h5>/sys and /proc files</h5><pre>[root@jeffs-laptop ~]# ls /proc/net/wireless <br>/proc/net/wireless<br>[root@jeffs-laptop ~]# cat !$<br>cat /proc/net/wireless<br>Inter-| sta-|   Quality        |   Discarded packets               | Missed | WE<br> face | tus | link level noise |  nwid  crypt   frag  retry   misc | beacon | 22<br>wlp12s0: 0000   62.  -48.  -256        0      0      0      0   1535        0<br>[root@jeffs-laptop ~]# <br><br></pre><p><br></p>

<h4><a name="mozTocId290478" class="mozTocH4"></a>MAC addresses:</h4>
jeffs@jeff-desktop:~$ cat /sys/class/net/*/address<br>00:22:4d:7c:4d:d9<br>00:10:18:<pre>cc:9c:77<br>00:00:00:00:00:00<br>00:16:3e:00:00:00<br>00:00:00:00<br>00:00:00:00:00:00<br>52:54:00:2c:bc:48<br>jeffs@jeff-desktop:~$ <br>jeffs@jeff-desktop:~$ egrep "up|down|unknown" /sys/class/net/*/operstate<br>/sys/class/net/eno1/operstate:up<br>/sys/class/net/enp3s0/operstate:up<br>/sys/class/net/lo/operstate:unknown<br>/sys/class/net/lxcbr0/operstate:down<br>/sys/class/net/sit0/operstate:down<br>/sys/class/net/virbr0-nic/operstate:down<br>/sys/class/net/virbr0/operstate:down<br>jeffs@jeff-desktop:~$ <br><br><br></pre>
<h4><a name="mozTocId218814" class="mozTocH4"></a>Additional information</h4>
<p>I found the following on <a href="http://unix.stackexchange.com/questions/150195/getting-information-from-sysfs">stackexchange</a>:<br>
</p>
<p>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
</p>
<table style="margin: 0px; padding: 0px; border: 0px; font-size: 13px; border-spacing: 0px; border-collapse: collapse; color: rgb(36, 39, 41); font-family: Arial, &quot;Helvetica Neue&quot;, Helvetica, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">
    <tbody style="margin: 0px; padding: 0px; border: 0px; font-size: 13px;">
    <tr style="margin: 0px; padding: 0px; border: 0px; font-size: 13px;">
        <td class="votecell" style="margin: 0px; padding: 0px 15px 0px 0px; border: 0px; font-size: 13px; vertical-align: top;">
            <div class="vote" style="margin: 0px; padding: 0px; border: 0px; font-size: 13px; text-align: center; min-width: 46px;">
                <a class="vote-up-off" title="This answer is useful" style="margin: 0px auto 2px; padding: 0px; border: 0px; font-size: 1px; color: rgb(21, 86, 128); text-decoration: none; cursor: pointer; background-image: url(&quot;img/sprites.svg?v=9e3ed1509727&quot;), none; background-size: initial; background-repeat: no-repeat; overflow: hidden; display: block; text-indent: -9999em; width: 40px; height: 48px; background-position: 0px -170px;">up
                    vote</a><span itemprop="upvoteCount" class="vote-count-post " style="margin: 8px 0px; padding: 0px; border: 0px; font-size: 20px; display: block; font-family: &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, Courier, Consolas, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, monospace; color: rgb(106, 115, 124);">6</span><a class="vote-down-off" title="This answer is not useful" style="margin: 0px auto 10px; padding: 0px; border: 0px; font-size: 1px; color: rgb(21, 86, 128); text-decoration: none; cursor: pointer; background-image: url(&quot;img/sprites.svg?v=9e3ed1509727&quot;), none; background-size: initial; background-repeat: no-repeat; overflow: hidden; display: block; text-indent: -9999em; width: 40px; height: 48px; background-position: 0px -220px;">down
                vote</a><span class="vote-accepted-on load-accepted-answer-date" title="loading when this answer was accepted..." style="margin: 0px auto 10px; padding: 0px; border: 0px; font-size: 1px; background-image: url(&quot;img/sprites.svg?v=9e3ed1509727&quot;), none; background-size: initial; background-repeat: no-repeat; overflow: hidden; display: block; text-indent: -9999em; width: 40px; height: 40px; background-position: -40px -270px; color: rgb(106, 115, 124);">accepted</span>
            </div>
        </td>
        <td class="answercell" style="margin: 0px; padding: 0px; border: 0px; font-size: 13px; vertical-align: top;">
            <div class="post-text" itemprop="text" style="margin: 0px 0px 5px; padding: 0px; border: 0px; font-size: 15px; width: 660px; word-wrap: break-word; line-height: 1.3;">
                <p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both;">It's the<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">device</code><span class="Apple-converted-space">&nbsp;</span>link in class directories that you aren't supposed to
                    use. The idea is that<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">/sys/class/net/eth0</code><span class="Apple-converted-space">&nbsp;</span>is a symbolic link to somewhere under<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">/sys/devices</code>,
                    and the<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">device</code>link
                    merely links to a (grand-)<sup style="margin: 0px; padding: 0px; border: 0px; font-size: 12px;">*</sup>parent directory;
                    instead of using the<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">device</code><span class="Apple-converted-space">&nbsp;</span>link, you're supposed to walk back to a parent
                    directory if needed.</p>
                <p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both;">Accessing files
                    in<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">/sys/class/net/eth0/</code><span class="Apple-converted-space">&nbsp;</span>is fine.</p>
                <p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 15px; clear: both;">If you're
                    referring to the operational status found in<span class="Apple-converted-space">&nbsp;</span><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">/sys/class/net/eth0/operstate</code>,
                    there are a few more. The names are defined in<span class="Apple-converted-space">&nbsp;</span><a href="http://lxr.free-electrons.com/source/net/core/net-sysfs.c?v=3.14#L226" style="margin: 0px; padding: 0px; border: 0px; font-size: 15px; color: rgb(16, 120, 165); text-decoration: none; cursor: pointer;"><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">net/core/net-sysfs.c</code></a><span class="Apple-converted-space">&nbsp;</span>and the constants in<span class="Apple-converted-space">&nbsp;</span><a href="http://lxr.free-electrons.com/source/include/uapi/linux/if.h?v=3.14#L115" style="margin: 0px; padding: 0px; border: 0px; font-size: 15px; color: rgb(16, 120, 165); text-decoration: none; cursor: pointer;"><code style="margin: 0px; padding: 1px 5px; border: 0px; font-size: 13px; font-family: Consolas, Menlo, Monaco, &quot;Lucida Console&quot;, &quot;Liberation Mono&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Courier New&quot;, monospace, sans-serif; background-color: rgb(239, 240, 241); white-space: pre-wrap;">include/uapi/linux/if.h</code></a>.
                    They come from<span class="Apple-converted-space">&nbsp;</span><a href="http://tools.ietf.org/html/rfc2863#section-3.1.14" style="margin: 0px; padding: 0px; border: 0px; font-size: 15px; color: rgb(16, 120, 165); text-decoration: none; cursor: pointer;">RFC
                        2863</a>.</p></div>
        </td>
    </tr>
    </tbody>
</table>
<h3><a name="mozTocId181640" class="mozTocH3"></a>The relationship between the OSI model and the NBMDT python source files</h3><table style=" text-align: left; width: 100%;" cellspacing="2" cellpadding="2" border="1"><tbody><tr><th>Layer<br></th><th>Typical tools to monitor and control<br></th><th>files<br></th></tr><tr><td style="vertical-align: top;">Application<br></td><td style="vertical-align: top;">nc, curl, wget<br></td><td style="vertical-align: top;">applications.py<br></td></tr><tr><td style="vertical-align: top;">Presentation<br></td><td style="vertical-align: top;"><br></td><td style="vertical-align: top;">presentation.py<br></td></tr><tr><td style="vertical-align: top;">Session<br></td><td style="vertical-align: top;">ss<br></td><td style="vertical-align: top;">session.py<br></td></tr><tr><td style="vertical-align: top;">Transport<br></td><td style="vertical-align: top;"><acronym>ip route</acronym>, route, netstat -r,<br></td><td style="vertical-align: top;">transports.py<br></td></tr><tr><td style="vertical-align: top;">Network<br></td><td style="vertical-align: top;">ip address, ping, ping6, ifconfig <br></td><td style="vertical-align: top;">routes.py, routing.py<br></td></tr><tr><td style="vertical-align: top;">Data-link<br></td><td style="vertical-align: top;">ip link, ip neigh, arp </td><td style="vertical-align: top;"><span style="text-decoration: line-through;">interfaces.py</span> <code>class </code><meta http-equiv="content-type" content="text/html; charset=UTF-8"><code>LogicalInterface</code>&nbsp; (<span style="color: rgb(153, 153, 153);">data-link.py</span>)<br></td></tr><tr><td style="vertical-align: top;">Physical<br></td><td style="vertical-align: top;">iwlist, ethtool <br></td><td style="vertical-align: top;">interfaces.py <code>class PhysicalInterface</code>&nbsp;&nbsp; <br></td></tr></tbody></table><p>See <a href="https://www.tecmint.com/ip-command-examples/">ip command examples from tecmint</a>, <a href="https://access.redhat.com/sites/default/files/attachments/rh_ip_command_cheatsheet_1214_jcs_print.pdf">the ip command cheat sheet</a>&nbsp; , <br></p><h3><a name="mozTocId962741" class="mozTocH3"></a>Critical Networks and NBMDT python source files<br></h3><table style=" text-align: left; width: 100%;" cellspacing="2" cellpadding="2" border="1"><tbody><tr><th>Service<br></th><th>typical tools to monitor and control<br></th><th>files<br></th></tr><tr><td style="vertical-align: top;">Distributed Name Service (DNS)<br></td><td style="vertical-align: top;">dig, host<br></td><td style="vertical-align: top;">dns.py<br></td></tr><tr><td style="vertical-align: top;">Network Time Service (NTP)<br></td><td style="vertical-align: top;">ntpq<br></td><td style="vertical-align: top;">ntp.py<br></td></tr><tr><td style="vertical-align: top;">Dynamic Host Configuration Protocol (DHCP)<br></td><td style="vertical-align: top;">dhclient<br></td><td style="vertical-align: top;">dhclient.py<br></td></tr></tbody></table><h3><a name="mozTocId89729" class="mozTocH3"></a>Other important files</h3><table style=" text-align: left; width: 100%;" cellspacing="2" cellpadding="2" border="1"><tbody><tr><th>file<br></th><th>role<br></th></tr><tr><td style="vertical-align: top;">nbmdt.py<br></td><td style="vertical-align: top;">imports all of the files listed above, is the main program<br></td></tr><tr><td style="vertical-align: top;">status.py<br></td><td style="vertical-align: top;">All files should import this file, provides status results, logging<br></td></tr><tr><td style="vertical-align: top;">configuration.py<br></td><td style="vertical-align: top;">Imports and exports configurations<br></td></tr></tbody></table><p><br></p><p><br></p>
<hr style="width: 100%; height: 2px;">
<ol id="mozToc" class="readonly"><!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6--><li><a href="#mozTocId308862">The Network Boot Monitor Diagnostic Tool (NBMDT)</a><ol><li><a href="#mozTocId235879">Purpose</a><ol><li><a href="#mozTocId341106">What are the advantages of the NBMDT over other network
      monitors?</a></li><li><a href="#mozTocId319879">
    </a></li></ol></li><li><a href="#mozTocId305441">Display</a><ol><li><a href="#mozTocId378908">Meaning of the displays:</a></li></ol></li><li><a href="#mozTocId569121">Operational modes
    </a></li><li><a href="#mozTocId336500">Configuration files</a><ol><li><a href="#mozTocId84646">Permanent configuration file</a></li><li><a href="#mozTocId304901"> 



    </a></li><li><a href="#mozTocId867742">Nominal configuration file</a></li></ol></li><li><a href="#mozTocId821733">Internals</a><ol><li><a href="#mozTocId76477">Network cards</a><ol><li><a href="#mozTocId290478">MAC addresses:</a></li><li><a href="#mozTocId218814">Additional information</a></li></ol></li><li><a href="#mozTocId181640">The relationship between the OSI model and the NBMDT python source files</a></li><li><a href="#mozTocId962741">Critical Networks and NBMDT python source files</a></li><li><a href="#mozTocId89729">Other important files</a></li></ol></li></ol></li></ol>
<pre><br><br><br><br><br></pre>

</body></html>